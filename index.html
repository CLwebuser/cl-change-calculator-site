<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="このお釣り計算サイトでは、硬貨と紙幣の枚数と支払金額を入力することで最少のお釣りを計算することができます。最適な硬貨と紙幣の組み合わせでお釣りが最少になるように算出します。">
    <meta name="keywords" content="お釣り計算, お釣り, お金, お釣り計算ツール, お釣り計算サイト, 日本円, お釣り最少、最少のお釣り">
    <meta property="og:title" content="お釣り計算サイト">
    <meta property="og:type" content="website">
    <meta property="og:description" content="このお釣り計算サイトでは、硬貨と紙幣の枚数と支払金額を入力することで最少のお釣りを計算することができます。最適な硬貨と紙幣の組み合わせでお釣りが最少になるように算出します。">
    <meta name="twitter:title" content="お釣り計算サイト">
    <meta name="twitter:description" content="このお釣り計算サイトでは、硬貨と紙幣の枚数と支払金額を入力することで最少のお釣りを計算することができます。最適な硬貨と紙幣の組み合わせでお釣りが最少になるように算出します。">
    <title>お釣り計算サイト</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <body onload="calculateChange()">
<div id="dateInfo">
        <div class="dateItem">制作: 2023/03/29</div>
        <div class="dateItem">最終編集: 2023/04/06</div>
</div>
        <div class="container">
    <h1>お釣り計算サイト</h1>
    <div class="input-container">
        <label for="tenThousandYen" class="input-label">一万円札:</label>
        <input type="number" id="tenThousandYen" placeholder="0" oninput="clearInput(this)">
    </div>
    <div class="input-container">
        <label for="fiveThousandYen" class="input-label">五千円札:</label>
        <input type="number" id="fiveThousandYen" placeholder="0" oninput="clearInput(this)">
    </div>
    <div class="input-container">
        <label for="thousandYen" class="input-label">千円札:</label>
        <input type="number" id="thousandYen" placeholder="0" oninput="clearInput(this)">
    </div>
    <div class="input-container">
        <label for="fiveHundredYen" class="input-label">500円玉:</label>
        <input type="number" id="fiveHundredYen" placeholder="0" oninput="clearInput(this)">
    </div>
    <div class="input-container">
        <label for="hundredYen" class="input-label">100円玉:</label>
        <input type="number" id="hundredYen" placeholder="0" oninput="clearInput(this)">
    </div>
    <div class="input-container">
        <label for="fiftyYen" class="input-label">50円玉:</label>
        <input type="number" id="fiftyYen" placeholder="0" oninput="clearInput(this)">
    </div>
    <div class="input-container">
        <label for="tenYen" class="input-label">10円玉:</label>
        <input type="number" id="tenYen" placeholder="0" oninput="clearInput(this)">
    </div>
    <div class="input-container">
        <label for="fiveYen" class="input-label">5円玉:</label>
        <input type="number" id="fiveYen" placeholder="0" oninput="clearInput(this)">
    </div>
    <div class="input-container">
        <label for="oneYen" class="input-label">1円玉:</label>
        <input type="number" id="oneYen" placeholder="0" oninput="clearInput(this)">
    </div>
    <div class="input-container">
        <label for="payment" class="input-label">支払額:</label>
        <input type="number" id="payment" placeholder="0" oninput="clearInput(this)">
    </div>
    <div class="button-container"> 
        <button onclick="calculateChange()">お釣り計算</button>
        <button onclick="resetInputs()"><i class="fas fa-undo"></i></button>
    </div>

    <h2>支払いに使用する硬貨・紙幣</h2>
    <p>支払いに使用する金額の合計: <span id="usedTotalAmount">0</span>円    </p>
    <p id="usedTenThousandYenP">一万円札: <span id="usedTenThousandYen">0</span></p>
    <p id="usedFiveThousandYenP">五千円札: <span id="usedFiveThousandYen">0</span></p>
    <p id="usedThousandYenP">千円札: <span id="usedThousandYen">0</span></p>
    <p id="usedFiveHundredYenP">500円玉: <span id="usedFiveHundredYen">0</span></p>
    <p id="usedHundredYenP">100円玉: <span id="usedHundredYen">0</span></p>
    <p id="usedFiftyYenP">50円玉: <span id="usedFiftyYen">0</span></p>
    <p id="usedTenYenP">10円玉: <span id="usedTenYen">0</span></p>
    <p id="usedFiveYenP">5円玉: <span id="usedFiveYen">0</span></p>
    <p id="usedOneYenP">1円玉: <span id="usedOneYen">0</span></p>

    <h2>お釣り</h2>
    <p>お釣り合計: (<span id="paymentTotalValue">0</span>円 - <span id="paymentValue">0</span>円) = <span id="changeTotalAmount">0</span>円</p>
    <p>お釣りの合計枚数: <span id="changeTotalCount">0</span>枚</p>
    <p id="changeTenThousandYenP">一万円札: <span id="changeTenThousandYen">0</span></p>
    <p id="changeFiveThousandYenP">五千円札: <span id="changeFiveThousandYen">0</span></p>
    <p id="changeThousandYenP">千円札: <span id="changeThousandYen">0</span></p>
    <p id="changeFiveHundredYenP">500円玉: <span id="changeFiveHundredYen">0</span></p>
    <p id="changeHundredYenP">100円玉: <span id="changeHundredYen">0</span></p>
    <p id="changeFiftyYenP">50円玉: <span id="changeFiftyYen">0</span></p>
    <p id="changeTenYenP">10円玉: <span id="changeTenYen">0</span></p>    
    <p id="changeFiveYenP">5円玉: <span id="changeFiveYen">0</span></p>
    <p id="changeOneYenP">1円玉: <span id="changeOneYen">0</span></p>
    
    <button id="feedbackBtn">フィードバック</button>
    <div id="confirmation" style="display:none;">
      <p>制作者に感想やフィードバックを送りますか？(未実装)</p>
      <button id="yesBtn">はい</button>
      <button id="noBtn">いいえ</button>
    </div>
</div>

    <script>

//入力欄の0を自動で削除
function clearInput(element) {
    element.placeholder = "";
}

        //フィードバック
        document.addEventListener("DOMContentLoaded", function () {
      const feedbackBtn = document.getElementById("feedbackBtn");
      const yesBtn = document.getElementById("yesBtn");
      const noBtn = document.getElementById("noBtn");
      const confirmation = document.getElementById("confirmation");

      feedbackBtn.addEventListener("click", function () {
        if (confirmation.style.display === "block") {
          confirmation.style.display = "none";
        } else {
          confirmation.style.display = "block";
        }
        window.scrollTo(0, document.body.scrollHeight);
      });

      yesBtn.addEventListener("click", function () {
        confirmation.style.display = "none";
        window.open("https://example.com/feedback", "_blank");
      });

      noBtn.addEventListener("click", function () {
        confirmation.style.display = "none";
      });
    });

        // リセットボタンの結果
        function resetInputs() {
    const inputIds = [
        "oneYen",
        "fiveYen",
        "tenYen",
        "fiftyYen",
        "hundredYen",
        "fiveHundredYen",
        "thousandYen",
        "fiveThousandYen",
        "tenThousandYen",
        "payment",
    ];

    for (const id of inputIds) {
        const inputElement = document.getElementById(id);
        inputElement.value = '';
        inputElement.placeholder = '0';
    }

    // リセット後にお釣り計算を実行
    calculateChange();
}

// 関数：お釣りを計算
function calculateChange() {
// 入力値を取得
const oneYen = parseInt(document.getElementById("oneYen").value) || 0;
    const fiveYen = parseInt(document.getElementById("fiveYen").value) || 0;
    const tenYen = parseInt(document.getElementById("tenYen").value) || 0;
    const fiftyYen = parseInt(document.getElementById("fiftyYen").value) || 0;
    const hundredYen = parseInt(document.getElementById("hundredYen").value) || 0;
    const fiveHundredYen = parseInt(document.getElementById("fiveHundredYen").value) || 0;
    const thousandYen = parseInt(document.getElementById("thousandYen").value) || 0;
    const fiveThousandYen = parseInt(document.getElementById("fiveThousandYen").value) || 0;
    const tenThousandYen = parseInt(document.getElementById("tenThousandYen").value) || 0;
    const payment = parseInt(document.getElementById("payment").value) || 0;

// 合計金額を計算
let totalAmount = oneYen + 5 * fiveYen + 10 * tenYen + 50 * fiftyYen + 100 * hundredYen + 500 * fiveHundredYen + 1000 * thousandYen + 5000 * fiveThousandYen + 10000 * tenThousandYen;

    // お釣りを計算
    let change = totalAmount - payment;

    // 支払額が足りない場合
    if (change < 0) {
        alert("支払額が足りません。");
        return;
    }

    // DPテーブルを初期化
    const dp = new Array(change + 1).fill(Infinity);
    dp[0] = 0;

    // コインの種類
    const coins = [1, 5, 10, 50, 100, 500, 1000, 5000, 10000];

    // DPテーブルを更新
    for (let i = 0; i < coins.length; i++) {
        for (let j = coins[i]; j <= change; j++) {
            dp[j] = Math.min(dp[j], dp[j - coins[i]] + 1);
        }
    }

    // 最適な支払いとお釣りを初期化
    let bestPayment = {
    oneYen: 0,
    fiveYen: 0,
    tenYen: 0,
    fiftyYen: 0,
    hundredYen: 0,
    fiveHundredYen: 0,
    thousandYen: 0,
    fiveThousandYen: 0,
    tenThousandYen: 0
};


let bestChange = {
    oneYen: 0,
    fiveYen: 0,
    tenYen: 0,
    fiftyYen: 0,
    hundredYen: 0,
    fiveHundredYen: 0,
    thousandYen: 0,
    fiveThousandYen: 0,
    tenThousandYen: 0
};




  

// 最小のお釣り枚数を取得
let minChange = Infinity;

// 各硬貨の組み合わせを試す
const maxPayment = payment + 10000;
for (let q = tenThousandYen; q >= 0 && minChange > 0; q--) {
    if (q * 10000 > maxPayment) continue;
  for (let p = fiveThousandYen; p >= 0 && minChange > 0; p--) {
    for (let o = thousandYen; o >= 0 && minChange > 0; o--) {
      for (let n = fiveHundredYen; n >= 0 && minChange > 0; n--) {
        for (let m = hundredYen; m >= 0 && minChange > 0; m--) {
          for (let l = fiftyYen; l >= 0 && minChange > 0; l--) {
            for (let k = tenYen; k >= 0 && minChange > 0; k--) {
              for (let j = fiveYen; j >= 0 && minChange > 0; j--) {
              for (let i = oneYen; i >= 0 && minChange > 0; i--) {
                             
                
                // 現在の支払い金額を計算
                const currentPayment = i + (5 * j) + (10 * k) + (50 * l) + (100 * m) + (500 * n)  + (1000 * o) + (5000 * p) + (10000 * q);

                // 支払額が要求額以上の場合
                if (currentPayment >= payment && currentPayment <= maxPayment) {
                    // お釣りを計算
                    const change = currentPayment - payment;
                    // お釣りの各硬貨の枚数を計算
let changeOneYen = change % 5;
let changeFiveYen = (change % 10 - changeOneYen) / 5;
let changeTenYen = (change % 50 - changeFiveYen * 5 - changeOneYen) / 10;
let changeFiftyYen = (change % 100 - changeTenYen * 10 - changeFiveYen * 5 - changeOneYen) / 50;
let changeHundredYen = (change % 500 - changeFiftyYen * 50 - changeTenYen * 10 - changeFiveYen * 5 - changeOneYen) / 100;
let changeFiveHundredYen = (change % 1000 - changeHundredYen * 100 - changeFiftyYen * 50 - changeTenYen * 10 - changeFiveYen * 5 - changeOneYen) / 500;
let changeThousandYen = (change % 5000 - changeFiveHundredYen * 500 - changeHundredYen * 100 - changeFiftyYen * 50 - changeTenYen * 10 - changeFiveYen * 5 - changeOneYen) / 1000;
let changeFiveThousandYen = (change % 10000 - changeThousandYen * 1000 - changeFiveHundredYen * 500 - changeHundredYen * 100 - changeFiftyYen * 50 - changeTenYen * 10 - changeFiveYen * 5 - changeOneYen) / 5000;
let changeTenThousandYen = (change - changeFiveThousandYen * 5000 - changeThousandYen * 1000 - changeFiveHundredYen * 500 - changeHundredYen * 100 - changeFiftyYen * 50 - changeTenYen * 10 - changeFiveYen * 5 - changeOneYen) / 10000;

                    // お釣りの枚数の合計を計算
                    const totalChange = dp[change];
// 最小のお釣り枚数を更新
if (totalChange < minChange) {
    minChange = totalChange;
    
bestPayment = {
oneYen: i,
fiveYen: j,
tenYen: k,
fiftyYen: l,
hundredYen: m,
fiveHundredYen: n,
thousandYen: o,
fiveThousandYen: p,
tenThousandYen: q
};

bestChange = {
oneYen: changeOneYen, fiveYen: changeFiveYen, tenYen: changeTenYen,
fiftyYen: changeFiftyYen, hundredYen: changeHundredYen, fiveHundredYen: changeFiveHundredYen,
thousandYen: changeThousandYen, fiveThousandYen: changeFiveThousandYen, tenThousandYen: changeTenThousandYen
};
if (minChange === 0) {
        break;
}
}
}
}
}
}
}
}
}
}
}
}

// 結果を表示
document.getElementById('usedOneYen').innerText = bestPayment.oneYen;
document.getElementById('usedFiveYen').innerText = bestPayment.fiveYen;
document.getElementById('usedTenYen').innerText = bestPayment.tenYen;
document.getElementById('usedFiftyYen').innerText = bestPayment.fiftyYen;
document.getElementById('usedHundredYen').innerText = bestPayment.hundredYen;
document.getElementById('usedFiveHundredYen').innerText = bestPayment.fiveHundredYen;
document.getElementById('usedThousandYen').innerText = bestPayment.thousandYen;
document.getElementById('usedFiveThousandYen').innerText = bestPayment.fiveThousandYen;
document.getElementById('usedTenThousandYen').innerText = bestPayment.tenThousandYen;
document.getElementById('changeOneYen').innerText = bestChange.oneYen;
document.getElementById('changeFiveYen').innerText = bestChange.fiveYen;
document.getElementById('changeTenYen').innerText = bestChange.tenYen;
document.getElementById('changeFiftyYen').innerText = bestChange.fiftyYen;
document.getElementById('changeHundredYen').innerText = bestChange.hundredYen;
document.getElementById('changeFiveHundredYen').innerText = bestChange.fiveHundredYen;
document.getElementById('changeThousandYen').innerText = bestChange.thousandYen;
document.getElementById('changeFiveThousandYen').innerText = bestChange.fiveThousandYen;
document.getElementById('changeTenThousandYen').innerText = bestChange.tenThousandYen;

// 0を非表示
function updateDisplay(id, value) {
    document.getElementById(id).innerText = value;
    if (value === 0) {
        document.getElementById(id + "P").style.display = "none";
    } else {
        document.getElementById(id + "P").style.display = "block";
    }
}
updateDisplay('usedOneYen', bestPayment.oneYen);
updateDisplay('usedFiveYen', bestPayment.fiveYen);
updateDisplay('usedTenYen', bestPayment.tenYen);
updateDisplay('usedFiftyYen', bestPayment.fiftyYen);
updateDisplay('usedHundredYen', bestPayment.hundredYen);
updateDisplay('usedFiveHundredYen', bestPayment.fiveHundredYen);
updateDisplay('usedThousandYen', bestPayment.thousandYen);
updateDisplay('usedFiveThousandYen', bestPayment.fiveThousandYen);
updateDisplay('usedTenThousandYen', bestPayment.tenThousandYen);
//0を非表示2
updateDisplay('changeOneYen', bestChange.oneYen);
updateDisplay('changeFiveYen', bestChange.fiveYen);
updateDisplay('changeTenYen', bestChange.tenYen);
updateDisplay('changeFiftyYen', bestChange.fiftyYen);
updateDisplay('changeHundredYen', bestChange.hundredYen);
updateDisplay('changeFiveHundredYen', bestChange.fiveHundredYen);
updateDisplay('changeThousandYen', bestChange.thousandYen);
updateDisplay('changeFiveThousandYen', bestChange.fiveThousandYen);
updateDisplay('changeTenThousandYen', bestChange.tenThousandYen);

    // 使用した金額の合計を表示
    const usedTotalAmount =
        (bestPayment.oneYen * 1) +
        (bestPayment.fiveYen * 5) +
        (bestPayment.tenYen * 10) +
        (bestPayment.fiftyYen * 50) +
        (bestPayment.hundredYen * 100) +
        (bestPayment.fiveHundredYen * 500) +
        (bestPayment.thousandYen * 1000) +
        (bestPayment.fiveThousandYen * 5000) +
        (bestPayment.tenThousandYen * 10000);

    document.getElementById('usedTotalAmount').innerText = usedTotalAmount;

    // お釣りの合計金額を表示
    const changeTotalAmount = usedTotalAmount - payment;
    document.getElementById('changeTotalAmount').innerText = changeTotalAmount;

    // お釣りの合計枚数を表示
    const changeTotalCount =
        bestChange.oneYen +
        bestChange.fiveYen +
        bestChange.tenYen +
        bestChange.fiftyYen +
        bestChange.hundredYen +
        bestChange.fiveHundredYen +
        bestChange.thousandYen +
        bestChange.fiveThousandYen +
        bestChange.tenThousandYen;
        document.getElementById('changeTotalCount').innerText = changeTotalCount;

// 支払額と使用した金額を表示
document.getElementById('paymentValue').innerText = payment;
document.getElementById('paymentTotalValue').innerText = usedTotalAmount;

}
</script>
</body>
</html>
